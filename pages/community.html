<!DOCTYPE html>
<html lang="ko" data-theme="heritage">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>êµí™˜ë…ì„œ â€“ ì»¤ë®¤ë‹ˆí‹°</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .gossip-banner{background:linear-gradient(135deg, #f6e1c3, #e8d4b8);border:2px solid #d4a574;border-radius:.8rem;padding:1rem 1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 12px rgba(0,0,0,.08)}
    .gossip-banner h2{margin:0 0 .5rem 0;font-size:1.3rem;color:#8B4513}
    .gossip-content{font-size:1rem;line-height:1.6;color:#333}
    .board-list{display:grid;gap:.6rem}
    .board-item{padding:.8rem;border:1px solid var(--line);border-radius:.6rem;cursor:pointer;transition:all .2s}
    .board-item:hover{background:color-mix(in oklab,var(--accent) 8%, var(--paper));border-color:var(--accent)}
    .board-item .title{font-weight:600;margin-bottom:.2rem}
    .board-item .meta{font-size:.85rem;color:var(--spine-dark);opacity:.7}
    .coming-soon{text-align:center;padding:2rem;color:var(--spine-dark);opacity:.6}
    .wishlist-item{display:flex;justify-content:space-between;align-items:center;padding:.6rem;border-bottom:1px solid var(--line)}
    .wishlist-item:last-child{border-bottom:none}
    .vote-btn{padding:.2rem .5rem;font-size:.8rem;border:1px solid var(--line);border-radius:.3rem;background:none;cursor:pointer;transition:all .2s}
    .vote-btn:hover{background:var(--accent);border-color:var(--accent)}
    .game-container{text-align:center;padding:2rem}
    .game-btn{font-size:1.1rem;padding:.8rem 1.5rem}
  </style>
</head>
<body class="subpage" data-page="community">
  <a href="#main" class="sr-only">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a>
  <header class="site-header is-solid">
    <a class="logo" href="../index.html">êµí™˜ë…ì„œ</a>
    <nav aria-label="ì£¼ìš”">
      <ul class="gnb">
        <li><a href="../index.html?from=internal">í™ˆ</a></li>
        <li><a href="schedule.html">ì¼ì •</a></li>
        <li><a href="library.html">ë„ì„œê´€</a></li>
        <li><a aria-current="page" href="community.html">ì»¤ë®¤ë‹ˆí‹°</a></li>
        <li><a href="myspace.html">ë‚´ í”„ë¡œí•„</a></li>
      </ul>
    </nav>
  </header>
  <main id="main">
    <h1>ì»¤ë®¤ë‹ˆí‹°</h1>
    
    <!-- ì˜¤ëŠ˜ì˜ ë…ì„œ ê°€ì‹­ -->
    <div class="gossip-banner">
      <h2>ğŸ’¬ ì˜¤ëŠ˜ì˜ ë…ì„œ ê°€ì‹­</h2>
      <div class="gossip-content" id="gossipContent">
        "ì±…ì„ ì½ëŠ” ì‚¬ëŒì€ ë‘ ë²ˆ ì‚°ë‹¤" - ë…ì„œëŠ” ìš°ë¦¬ì—ê²Œ ë¬´í•œí•œ ê²½í—˜ì„ ì„ ì‚¬í•©ë‹ˆë‹¤ âœ¨
      </div>
    </div>

    <!-- 1. ê³µì§€ ê²Œì‹œíŒ -->
    <section class="panel">
      <h2>ğŸ“¢ ê³µì§€ì‚¬í•­</h2>
      <div class="board-notes">
        <div class="note-item notice">
          <div class="note-header">
            <span class="note-emoji">ğŸ“Œ</span>
            <span class="note-title">12ì›” êµí™˜ë…ì„œ ì¼ì • ì•ˆë‚´</span>
          </div>
          <div class="note-meta">
            <span class="author">ê´€ë¦¬ì</span>
            <span class="divider">Â·</span>
            <span class="date">12ì›” 14ì¼</span>
          </div>
          <div class="note-preview">12ì›” êµí™˜ë…ì„œ ëª¨ì„ ì¼ì •ì„ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤. ë§ì€ ì°¸ì—¬ ë¶€íƒë“œë ¤ìš”!</div>
        </div>
        <div class="note-item notice">
          <div class="note-header">
            <span class="note-emoji">ğŸ„</span>
            <span class="note-title">í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íŠ¹ë³„ ì´ë²¤íŠ¸ ì˜ˆê³ </span>
          </div>
          <div class="note-meta">
            <span class="author">ê´€ë¦¬ì</span>
            <span class="divider">Â·</span>
            <span class="date">5ì¼ ì „</span>
          </div>
          <div class="note-preview">ì˜¬í•´ì˜ íŠ¹ë³„í•œ ì´ë²¤íŠ¸ë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤. ê¸°ëŒ€í•´ì£¼ì„¸ìš”!</div>
        </div>
        <div class="note-item notice">
          <div class="note-header">
            <span class="note-emoji">ğŸ“š</span>
            <span class="note-title">ë„ì„œê´€ ì´ìš© ì•ˆë‚´ì‚¬í•­</span>
          </div>
          <div class="note-meta">
            <span class="author">ê´€ë¦¬ì</span>
            <span class="divider">Â·</span>
            <span class="date">1ì£¼ ì „</span>
          </div>
          <div class="note-preview">ë„ì„œê´€ì„ ì´ìš©í•˜ì‹¤ ë•Œ ì§€ì¼œì•¼ í•  ê·œì¹™ì„ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.</div>
        </div>
      </div>
    </section>

    <!-- 2. ììœ  ê²Œì‹œíŒ -->
    <section class="panel">
      <h2>ğŸ’¬ ììœ  ê²Œì‹œíŒ</h2>
      <div class="board-notes">
        <div class="note-item free popular">
          <div class="note-header">
            <span class="note-emoji">ğŸ”¥</span>
            <span class="note-title">ìš”ì¦˜ ì½ê³  ìˆëŠ” ì±… ì¶”ì²œí•´ì£¼ì„¸ìš”!</span>
          </div>
          <div class="note-meta">
            <span class="author">ì±…ë²Œë ˆ123</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ’¬ 28</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ‘ï¸ 156</span>
            <span class="divider">Â·</span>
            <span class="date">3ì‹œê°„ ì „</span>
          </div>
          <div class="note-preview">ìµœê·¼ì— ì¬ë°Œê²Œ ì½ì€ ì±… ìˆìœ¼ì‹ ê°€ìš”? ë‹¤ìŒì— ì½ì„ ì±…ì„ ì°¾ê³  ìˆì–´ìš”...</div>
        </div>
        <div class="note-item free">
          <div class="note-header">
            <span class="note-emoji">ğŸ“–</span>
            <span class="note-title">ë…ì„œ ëª¨ì„ í›„ê¸° ê³µìœ í•©ë‹ˆë‹¤</span>
          </div>
          <div class="note-meta">
            <span class="author">ë…ì„œì™•</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ’¬ 12</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ‘ï¸ 89</span>
            <span class="divider">Â·</span>
            <span class="date">5ì‹œê°„ ì „</span>
          </div>
          <div class="note-preview">ì§€ë‚œ ì£¼ë§ì— ìˆì—ˆë˜ ë…ì„œ ëª¨ì„ì´ ì •ë§ ì•Œì°¼ì–´ìš”. ë‹¤ë“¤ ì˜¤ì…”ì„œ...</div>
        </div>
        <div class="note-item free">
          <div class="note-header">
            <span class="note-emoji">ğŸ’­</span>
            <span class="note-title">ì±…ì„ ì½ë‹¤ê°€ ë“  ìƒê°ë“¤...</span>
          </div>
          <div class="note-meta">
            <span class="author">ì‚¬ìƒ‰ê°€</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ’¬ 7</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ‘ï¸ 45</span>
            <span class="divider">Â·</span>
            <span class="date">1ì¼ ì „</span>
          </div>
          <div class="note-preview">ë…ì„œë¥¼ í•˜ë©´ì„œ ë¬¸ë“ ë– ì˜¤ë¥¸ ìƒê°ë“¤ì„ ì •ë¦¬í•´ë´¤ì–´ìš”...</div>
        </div>
        <div class="note-item free">
          <div class="note-header">
            <span class="note-emoji">ğŸ“š</span>
            <span class="note-title">ì˜¬í•´ì˜ ì±… BEST 10ì€?</span>
          </div>
          <div class="note-meta">
            <span class="author">ë¶ë¦¬ë·°ì–´</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ’¬ 34</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ‘ï¸ 201</span>
            <span class="divider">Â·</span>
            <span class="date">2ì¼ ì „</span>
          </div>
          <div class="note-preview">ì˜¬í•´ ì½ì€ ì±… ì¤‘ì—ì„œ ê°€ì¥ ì¸ìƒ ê¹Šì—ˆë˜ ì±…ì„ ê³µìœ í•´ì£¼ì„¸ìš”!</div>
        </div>
        <div class="note-item free">
          <div class="note-header">
            <span class="note-emoji">â˜•</span>
            <span class="note-title">ë…ì„œí•˜ê¸° ì¢‹ì€ ì¹´í˜ ì¶”ì²œ</span>
          </div>
          <div class="note-meta">
            <span class="author">ì¹´í˜ëŸ¬ë²„</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ’¬ 15</span>
            <span class="divider">Â·</span>
            <span class="stats">ğŸ‘ï¸ 67</span>
            <span class="divider">Â·</span>
            <span class="date">3ì¼ ì „</span>
          </div>
          <div class="note-preview">ì¡°ìš©í•˜ê³  ë¶„ìœ„ê¸° ì¢‹ì€ ì¹´í˜ ì°¾ê³  ê³„ì‹ ê°€ìš”? ì œê°€ ìì£¼ ê°€ëŠ”...</div>
        </div>
      </div>
    </section>

    <!-- 3. ì½ê³  ì‹¶ì€ ì±… ìœ„ì‹œë¦¬ìŠ¤íŠ¸ -->
    <section class="panel">
      <h2>ğŸ“š ì½ê³  ì‹¶ì€ ì±… ìœ„ì‹œë¦¬ìŠ¤íŠ¸</h2>
      <p class="muted" style="margin-bottom:1rem">ë‹¤ìŒì— ì½ê³  ì‹¶ì€ ì±…ì— íˆ¬í‘œí•´ì£¼ì„¸ìš”!</p>
      <div id="wishlist"></div>
      <div style="margin-top:1rem">
        <input type="text" id="newWishBook" placeholder="ì±… ì œëª© ì…ë ¥" style="padding:.5rem;border:1px solid var(--line);border-radius:.5rem;width:100%;max-width:300px">
        <button class="btn" id="addWishBtn" style="margin-left:.5rem">ì¶”ê°€</button>
      </div>
    </section>

    <!-- 4. ê°„ë‹¨í•œ ê²Œì„ -->
    <section class="panel">
      <h2>ğŸ® ë…ì„œ ê²Œì„</h2>
      <div class="game-container">
        <p style="margin-bottom:1rem">ì˜¤ëŠ˜ ì½ì„ ì±…ì„ ëœë¤ìœ¼ë¡œ ë½‘ì•„ë³´ì„¸ìš”!</p>
        <button class="btn game-btn" id="randomBookBtn">ğŸ² ëœë¤ ì±… ë½‘ê¸°</button>
        <div id="randomResult" style="margin-top:1.5rem"></div>
      </div>
    </section>

  </main>
  
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-links">
        <a href="about.html">About</a>
        <span class="footer-divider">Â·</span>
        <a href="https://github.com/sihyeon25/Book-exchange" target="_blank" rel="noopener noreferrer">GitHub</a>
        <span class="footer-divider">Â·</span>
        <a href="mailto:sihyeon25@naver.com">Contact</a>
      </div>
      <small>Â© 2025 êµí™˜ë…ì„œ. All rights reserved.</small>
    </div>
  </footer>

  <script src="../js/bookData.js"></script>
  <script>
    // ìª½ì§€ í´ë¦­ ì‹œ ìƒì„¸ë³´ê¸°
    document.addEventListener('DOMContentLoaded', () => {
      const noteItems = document.querySelectorAll('.note-item');
      
      noteItems.forEach(note => {
        note.addEventListener('click', function() {
          const title = this.querySelector('.note-title').textContent;
          const author = this.querySelector('.author').textContent;
          const preview = this.querySelector('.note-preview').textContent;
          
          alert(`ğŸ“ ${title}\n\nì‘ì„±ì: ${author}\n\n${preview}\n\nâ€» ë°±ì—”ë“œ ì—°ë™ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤`);
        });
      });
    });
    
    // ì˜¤ëŠ˜ì˜ ê°€ì‹­ ëœë¤ í‘œì‹œ
    const gossips = [
      '"ì±…ì„ ì½ëŠ” ì‚¬ëŒì€ ë‘ ë²ˆ ì‚°ë‹¤" - ë…ì„œëŠ” ìš°ë¦¬ì—ê²Œ ë¬´í•œí•œ ê²½í—˜ì„ ì„ ì‚¬í•©ë‹ˆë‹¤ âœ¨',
      'ğŸ“š ì˜¤ëŠ˜ í•˜ë£¨ 30ë¶„ë§Œ ì±…ì„ ì½ì–´ë³´ì„¸ìš”. ì‘ì€ ìŠµê´€ì´ í° ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤!',
      'ğŸŒŸ ì±…ì¥ì„ ë„˜ê¸¸ ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì„¸ê³„ê°€ í¼ì³ì§‘ë‹ˆë‹¤',
      'â˜• ì»¤í”¼ í•œ ì”ê³¼ í•¨ê»˜í•˜ëŠ” ë…ì„œ ì‹œê°„, ìµœê³ ì˜ íë§ì´ì£ !',
      'ğŸ’¡ ë…ì„œëŠ” ë§ˆìŒì˜ ì–‘ì‹ì´ì ì˜í˜¼ì˜ ì°½ë¬¸ì…ë‹ˆë‹¤'
    ];
    document.getElementById('gossipContent').textContent = gossips[Math.floor(Math.random() * gossips.length)];

    // ê³µì§€ì‚¬í•­ ë°ì´í„°
    const notices = [
      { id: 1, title: 'ğŸ‰ 12ì›” ë…ì„œ ëª¨ì„ ì¼ì • ê³µì§€', date: '2025-11-10', content: '12ì›” 15ì¼ ì˜¤í›„ 7ì‹œ, ê°•ë‚¨ ì¹´í˜ì—ì„œ ë§Œë‚˜ìš”!' },
      { id: 2, title: 'ğŸ‚ í¬ìˆ˜ë‹˜ ìƒì¼ ì¶•í•˜í•©ë‹ˆë‹¤!', date: '2025-11-08', content: '11ì›” 20ì¼ì€ í¬ìˆ˜ë‹˜ì˜ ìƒì¼! ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸˆ' },
      { id: 3, title: 'ğŸ“– ì‹ ê·œ ë„ì„œ ì¶”ê°€ ì•ˆë‚´', date: '2025-11-05', content: 'ë„ì„œê´€ì— ìƒˆë¡œìš´ ì±…ë“¤ì´ ì¶”ê°€ë˜ì—ˆì–´ìš”. í™•ì¸í•´ë³´ì„¸ìš”!' }
    ];

    function renderNotices() {
      const el = document.getElementById('noticeBoard');
      el.innerHTML = notices.map(n => `
        <div class="board-item">
          <div class="title">${n.title}</div>
          <div class="meta">${n.date} Â· ${n.content}</div>
        </div>
      `).join('');
    }

    // ìœ„ì‹œë¦¬ìŠ¤íŠ¸
    function getWishlist() {
      try {
        return JSON.parse(localStorage.getItem('wishlist') || '[]');
      } catch {
        return [];
      }
    }

    function saveWishlist(list) {
      localStorage.setItem('wishlist', JSON.stringify(list));
    }

    function renderWishlist() {
      const list = getWishlist();
      const el = document.getElementById('wishlist');
      
      if (list.length === 0) {
        el.innerHTML = '<p class="muted">ì•„ì§ ì¶”ê°€ëœ ì±…ì´ ì—†ì–´ìš”. ì²« ë²ˆì§¸ ì±…ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>';
        return;
      }

      el.innerHTML = list.map((item, idx) => `
        <div class="wishlist-item">
          <div>
            <strong>${item.title}</strong>
            <span class="muted" style="margin-left:.5rem">${item.votes || 0}í‘œ</span>
          </div>
          <button class="vote-btn" onclick="voteBook(${idx})">ğŸ‘ íˆ¬í‘œ</button>
        </div>
      `).join('');
    }

    window.voteBook = function(index) {
      const list = getWishlist();
      if (!list[index].votes) list[index].votes = 0;
      list[index].votes++;
      saveWishlist(list);
      renderWishlist();
    }

    document.getElementById('addWishBtn').addEventListener('click', () => {
      const input = document.getElementById('newWishBook');
      const title = input.value.trim();
      
      if (!title) {
        alert('ì±… ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
        return;
      }

      const list = getWishlist();
      list.push({ title, votes: 0 });
      saveWishlist(list);
      input.value = '';
      renderWishlist();
    });

    // ëœë¤ ì±… ë½‘ê¸°
    document.getElementById('randomBookBtn').addEventListener('click', () => {
      const rnd = books[Math.floor(Math.random() * books.length)];
      const avg = computeAverageRating(rnd);
      document.getElementById('randomResult').innerHTML = `
        <div class="card" style="cursor:pointer;max-width:400px;margin:0 auto" onclick="location.href='book-detail.html?id=${rnd.id}'">
          <h3 style="margin:.3rem 0">${rnd.title}</h3>
          <p class="muted">${rnd.author}</p>
          <div style="margin-top:.5rem">â­ ${avg || '0.0'} / 5</div>
          <button class="btn" style="margin-top:.8rem">ìƒì„¸ ë³´ê¸°</button>
        </div>
      `;
    });

    // ì´ˆê¸° ë Œë”ë§
    renderNotices();
    renderWishlist();
  </script>
  <script src="../js/page-transitions.js"></script>
</body>
</html>
